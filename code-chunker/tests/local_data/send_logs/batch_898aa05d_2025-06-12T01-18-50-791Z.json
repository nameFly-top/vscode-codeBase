{
  "batchInfo": {
    "batchId": "898aa05d",
    "timestamp": "2025-06-12T01:18:50.791Z",
    "chunkCount": 2,
    "userId": "test-monitor-user-comprehensive",
    "deviceId": "test-monitor-device-comprehensive"
  },
  "embeddingOptions": {
    "uniqueId": "test-monitor-user-comprehensive-test-monitor-device-comprehensive-1749691130791",
    "parserVersion": "1.0.0",
    "processingMode": "sync"
  },
  "codeChunks": [
    {
      "chunkId": "test_file_scanner_6891f537_12-124_mbsowum3_2",
      "status": "success",
      "vector": [
        -0.955078125,
        0.5,
        0.1839599609375,
        -0.8291015625,
        0.39599609375,
        -0.1217041015625,
        0.2113037109375,
        0.5703125,
        -0.27392578125,
        0.08538818359375,
        0.80615234375,
        0.873046875,
        -0.391845703125,
        -0.080810546875,
        0.759765625,
        -0.11737060546875,
        0.0125274658203125,
        -0.336181640625,
        -0.0169830322265625,
        -0.207763671875,
        -0.035797119140625,
        0.56787109375,
        -0.1490478515625,
        0.127197265625,
        0.69580078125,
        0.270751953125,
        -0.6494140625,
        -0.884765625,
        0.14892578125,
        -0.1363525390625,
        0.57373046875,
        -0.0771484375,
        0.37158203125,
        0.004993438720703125,
        0.83056640625,
        -0.54541015625,
        -0.491943359375,
        0.57177734375,
        0.208740234375,
        -0.6494140625,
        0.2191162109375,
        -0.5927734375,
        -0.330322265625,
        0.046173095703125,
        -0.0533447265625,
        0.92626953125,
        -0.52490234375,
        0.4267578125,
        -0.0877685546875,
        -0.0777587890625,
        -0.7998046875,
        -0.406982421875,
        0.193603515625,
        -0.2364501953125,
        -0.27783203125,
        -0.34619140625,
        0.75048828125,
        -0.3291015625,
        0.54150390625,
        -0.337646484375,
        -0.374267578125,
        -0.44287109375,
        -0.658203125,
        -0.1363525390625,
        0.66259765625,
        -0.1409912109375,
        -0.666015625,
        -0.24072265625,
        0.053955078125,
        0.880859375,
        -0.421630859375,
        -0.58740234375,
        -0.00832366943359375,
        -0.341064453125,
        0.357177734375,
        0.475830078125,
        0.36376953125,
        -0.5634765625,
        -0.401611328125,
        0.2222900390625,
        -0.68408203125,
        -0.3212890625,
        -0.015960693359375,
        -0.310791015625,
        0.4013671875,
        -0.1796875,
        -0.6201171875,
        -0.7314453125,
        0.58740234375,
        0.69580078125,
        -0.1744384765625,
        0.51904296875,
        0.1751708984375,
        0.62939453125,
        -0.5029296875,
        -0.2366943359375,
        0.42333984375,
        0.30859375,
        -0.371337890625,
        -0.900390625,
        -0.10369873046875,
        -0.6767578125,
        -0.5009765625,
        -0.373046875,
        -0.701171875,
        0.74560546875,
        0.63525390625,
        -0.380126953125,
        -0.059326171875,
        -0.429443359375,
        -0.25244140625,
        0.7275390625,
        0.1644287109375,
        -0.404541015625,
        -0.36376953125,
        0.06793212890625,
        -0.01264190673828125,
        0.86328125,
        0.67431640625,
        -0.1444091796875,
        0.630859375,
        0.029998779296875,
        -0.096923828125,
        0.399658203125,
        -0.5390625,
        0.65087890625,
        -0.1983642578125,
        -0.04248046875,
        -0.0156097412109375,
        0.93212890625,
        -0.0830078125,
        0.357421875,
        -0.1663818359375,
        0.271484375,
        -0.15185546875,
        -0.231201171875,
        0.4951171875,
        0.305908203125,
        -0.153076171875,
        0.331787109375,
        0.06427001953125,
        0.1048583984375,
        -0.261962890625,
        -0.269775390625,
        0.7412109375,
        -0.384521484375,
        -0.043426513671875,
        -0.411865234375,
        -0.83837890625,
        -0.80517578125,
        0.77197265625,
        -0.324462890625,
        0.6123046875,
        -0.459228515625,
        0.51904296875,
        -0.04644775390625,
        0.96923828125,
        0.54150390625,
        0.69580078125,
        -0.0016832351684570312,
        -0.48486328125,
        -0.83447265625,
        0.38134765625,
        0.1708984375,
        -0.2176513671875,
        0.3662109375,
        -0.36474609375,
        -0.50146484375,
        -0.66796875,
        0.2293701171875,
        -0.3203125,
        0.1373291015625,
        -0.423828125,
        0.034942626953125,
        -0.72900390625,
        0.59375,
        0.464111328125,
        0.54541015625,
        -0.5185546875,
        0.2108154296875,
        0.25,
        -0.1461181640625,
        0.209228515625,
        -0.09326171875,
        -0.8740234375,
        -0.46337890625,
        0.7646484375,
        0.736328125,
        0.1024169921875,
        -0.465576171875,
        0.1876220703125,
        0.455078125,
        -0.3740234375,
        -0.71484375,
        0.744140625,
        -0.2188720703125,
        -0.6474609375,
        0.57763671875,
        0.75830078125,
        -0.406494140625,
        -0.56103515625,
        0.72998046875,
        0.103515625,
        0.31689453125,
        -0.343994140625,
        -0.2099609375,
        -0.325927734375,
        0.7255859375,
        -0.06988525390625,
        0.56201171875,
        -0.1793212890625,
        -0.6591796875,
        -0.240234375,
        0.2427978515625,
        0.70947265625,
        0.449951171875,
        -0.0931396484375,
        -0.78564453125,
        0.2166748046875,
        -0.266357421875,
        -0.4560546875,
        -0.475830078125,
        0.40087890625,
        0.4443359375,
        0.46435546875,
        0.5126953125,
        -0.8525390625,
        0.7646484375,
        -0.0390625,
        0.7783203125,
        0.46240234375,
        -0.55029296875,
        -0.472412109375,
        -0.31494140625,
        0.365478515625,
        0.798828125,
        0.04681396484375,
        -0.6787109375,
        0.66552734375,
        -0.277099609375,
        -0.0131072998046875,
        0.0863037109375,
        0.34814453125,
        -0.261474609375,
        -0.59912109375,
        0.4736328125,
        0.55859375,
        -0.1595458984375,
        0.22265625,
        0.0755615234375,
        0.640625,
        -0.56982421875,
        -0.043060302734375,
        0.448486328125,
        -0.2225341796875,
        0.728515625,
        -0.6240234375,
        0.267578125,
        0.556640625,
        -0.52001953125,
        0.45068359375,
        0.5,
        -0.24462890625,
        -0.67041015625,
        0.70166015625,
        0.59619140625,
        -0.481201171875,
        0.337158203125,
        0.295166015625,
        0.57275390625,
        0.88818359375,
        -0.252197265625,
        0.367431640625,
        -0.74658203125,
        -0.1629638671875,
        0.08148193359375,
        -0.0987548828125,
        -0.386474609375,
        -0.09674072265625,
        -0.103759765625,
        0.12408447265625,
        -0.152587890625,
        0.2479248046875,
        0.634765625,
        -0.49267578125,
        -0.10003662109375,
        -0.8896484375,
        0.2119140625,
        0.32373046875,
        -0.6689453125,
        -0.2198486328125,
        -0.421142578125,
        0.90625,
        0.091552734375,
        0.53662109375,
        0.04864501953125,
        0.52099609375,
        -0.134765625,
        -0.6708984375,
        -0.409912109375,
        0.312255859375,
        0.25146484375,
        -0.30859375,
        0.8974609375,
        0.261474609375,
        0.161865234375,
        -0.55908203125,
        -0.68896484375,
        0.5322265625,
        0.411865234375,
        0.82470703125,
        0.12274169921875,
        -0.443115234375,
        -0.7548828125,
        0.09381103515625,
        -0.24072265625,
        -0.05645751953125,
        -0.12744140625,
        -0.66015625,
        -0.62646484375,
        0.38232421875,
        0.86767578125,
        -0.80029296875,
        0.70068359375,
        0.640625,
        0.10369873046875,
        -0.267822265625,
        -0.673828125,
        -0.251708984375,
        -0.693359375,
        0.873046875,
        -0.96044921875,
        0.2264404296875,
        -0.0899658203125,
        0.56787109375,
        -0.48828125,
        0.298095703125,
        0.1331787109375,
        -0.2335205078125,
        -0.151611328125,
        0.640625,
        0.5,
        0.6611328125,
        0.7412109375,
        0.454833984375,
        -0.49853515625,
        0.49755859375,
        0.29248046875,
        -0.55810546875,
        0.447265625,
        0.841796875,
        0.35205078125,
        -0.1337890625,
        0.79931640625,
        -0.8310546875,
        -0.291015625,
        -0.82666015625,
        -0.07855224609375,
        0.08349609375,
        -0.556640625,
        0.01763916015625,
        0.1629638671875,
        -0.38232421875,
        -0.0186004638671875,
        -0.043609619140625,
        -0.389404296875,
        -0.53173828125,
        -0.1334228515625,
        -0.353759765625,
        0.7314453125,
        0.30712890625,
        -0.8037109375,
        0.329833984375,
        -0.4541015625,
        -0.8193359375,
        0.09271240234375,
        -0.285888671875,
        -0.1806640625,
        0.1456298828125,
        0.314697265625,
        -0.708984375,
        0.6201171875,
        -0.1331787109375,
        0.1888427734375,
        -0.453857421875,
        0.376220703125,
        0.033843994140625,
        0.003459930419921875,
        0.12384033203125,
        -0.78857421875,
        -0.89501953125,
        -0.66259765625,
        0.5947265625,
        0.63232421875,
        -0.84033203125,
        -0.5615234375,
        0.78466796875,
        0.560546875,
        0.0255126953125,
        0.2054443359375,
        -0.1395263671875,
        0.87890625,
        0.44775390625,
        0.03759765625,
        0.018890380859375,
        0.9130859375,
        0.30126953125,
        0.19482421875,
        0.7578125,
        -0.368896484375,
        0.587890625,
        0.2437744140625,
        0.282958984375,
        -0.46142578125,
        0.6015625,
        0.52001953125,
        0.2431640625,
        0.2445068359375,
        -0.8046875,
        0.328369140625,
        0.89306640625,
        0.64599609375,
        -0.453125,
        0.5869140625,
        -0.347900390625,
        0.845703125,
        -0.3369140625,
        -0.2269287109375,
        -0.20751953125,
        0.1263427734375,
        -0.154296875,
        0.121337890625,
        0.83056640625,
        -0.51220703125,
        -0.144775390625,
        0.08880615234375,
        0.5078125,
        0.71875,
        -0.421875,
        0.416748046875,
        0.60400390625,
        0.4169921875,
        0.114990234375,
        -0.10260009765625,
        -0.53271484375,
        0.81640625,
        0.15283203125,
        0.0986328125,
        0.67822265625,
        0.55615234375,
        -0.70361328125,
        0.08709716796875,
        -0.2366943359375,
        -0.212158203125,
        0.54248046875,
        -0.0906982421875,
        0.0660400390625,
        0.548828125,
        -0.437255859375,
        -0.83349609375,
        -0.52734375,
        -0.9208984375,
        -0.2119140625,
        0.5400390625,
        -0.5322265625,
        -0.61328125,
        0.36767578125,
        -0.044677734375,
        0.80224609375,
        0.36328125,
        -0.509765625,
        -0.7021484375,
        -0.084716796875,
        0.55908203125,
        -0.7197265625,
        -0.1524658203125,
        -0.449462890625,
        0.4404296875,
        0.344970703125,
        0.325927734375,
        -0.8134765625,
        -0.357177734375,
        -0.71142578125,
        -0.68310546875,
        0.0121307373046875,
        0.050933837890625,
        0.2646484375,
        -0.6650390625,
        -0.70703125,
        -0.6220703125,
        -0.482666015625,
        0.5146484375,
        0.78271484375,
        -0.233154296875,
        -0.1435546875,
        -0.21484375,
        -0.421875,
        0.546875,
        0.5869140625,
        0.3203125,
        0.3955078125,
        0.51025390625,
        0.6064453125,
        -0.7548828125,
        -0.50244140625,
        0.488525390625,
        -0.408203125,
        -0.4404296875,
        0.5400390625,
        -0.7548828125,
        0.76025390625,
        -0.55322265625,
        0.49560546875,
        0.796875,
        -0.9619140625,
        -0.7041015625,
        0.36376953125,
        -0.05523681640625,
        -0.76123046875,
        -0.57177734375,
        -0.2374267578125,
        0.732421875,
        -0.337646484375,
        0.262939453125,
        -0.01309967041015625,
        -0.64697265625,
        -0.2060546875,
        0.72998046875,
        0.615234375,
        0.4482421875,
        0.0452880859375,
        0.7314453125,
        0.87939453125,
        0.30615234375,
        -0.429443359375,
        -0.427490234375,
        0.0229339599609375,
        0.6201171875,
        0.378173828125,
        0.828125,
        0.082763671875,
        -0.85986328125,
        0.4697265625,
        -0.331787109375,
        0.7431640625,
        -0.1856689453125,
        -0.271484375,
        -0.08612060546875,
        -0.474365234375,
        -0.53662109375,
        -0.7109375,
        -0.408203125,
        -0.222900390625,
        -0.5,
        -0.223876953125,
        -0.75927734375,
        -0.826171875,
        -0.1905517578125,
        0.169189453125,
        0.66650390625,
        -0.1578369140625,
        -0.6259765625,
        0.4462890625,
        0.251953125,
        -0.3779296875,
        -0.1177978515625,
        0.6015625,
        -0.7509765625,
        0.40283203125,
        0.759765625,
        -0.367919921875,
        -0.6494140625,
        0.473876953125,
        0.2117919921875,
        -0.3056640625,
        -0.6337890625,
        -0.2344970703125,
        -0.265869140625,
        -0.6064453125,
        -0.56884765625,
        0.490478515625,
        -0.1580810546875,
        -0.0039005279541015625,
        -0.104736328125,
        -0.06121826171875,
        0.452392578125,
        0.58544921875,
        -0.88330078125,
        0.82275390625,
        0.1890869140625,
        -0.395263671875,
        0.8134765625,
        0.0196990966796875,
        0.8525390625,
        0.28369140625,
        -0.08770751953125,
        -0.21142578125,
        0.467529296875,
        0.01343536376953125,
        -0.477294921875,
        0.52685546875,
        0.708984375,
        -0.7109375,
        0.0119781494140625,
        -0.375244140625,
        -0.53759765625,
        -0.313720703125,
        0.58935546875,
        -0.160888671875,
        -0.6318359375,
        -0.53369140625,
        -0.48486328125,
        0.7451171875,
        0.372314453125,
        -0.29248046875,
        0.190185546875,
        0.87158203125,
        0.2308349609375,
        0.8671875,
        0.01229095458984375,
        0.13623046875,
        -0.197998046875,
        -0.201416015625,
        -0.7333984375,
        0.1683349609375,
        0.697265625,
        -0.248779296875,
        -0.466064453125,
        0.7255859375,
        -0.60986328125,
        0.57470703125,
        -0.62744140625,
        0.76904296875,
        0.7626953125,
        0.64404296875,
        0.442626953125,
        0.0263824462890625,
        -0.30126953125,
        0.5107421875,
        -0.6796875,
        0.496826171875,
        0.1898193359375,
        -0.051513671875,
        0.1923828125,
        -0.27001953125,
        0.455322265625,
        0.33056640625,
        0.87939453125,
        -0.73876953125,
        0.6796875,
        -0.326904296875,
        0.33837890625,
        -0.477783203125,
        -0.0169830322265625,
        -0.357666015625,
        0.46337890625,
        -0.380126953125,
        0.125244140625,
        -0.2115478515625,
        -0.69580078125,
        -0.529296875,
        -0.513671875,
        -0.51025390625,
        0.304931640625,
        -0.464111328125,
        0.58447265625,
        -0.53466796875,
        0.58544921875,
        -0.46484375,
        -0.4677734375,
        -0.65625,
        0.3466796875,
        -0.1669921875,
        -0.59814453125,
        0.077392578125,
        -0.1597900390625,
        0.6064453125,
        -0.10235595703125,
        0.93701171875,
        0.1136474609375,
        -0.4462890625,
        0.2249755859375,
        0.54345703125,
        -0.1749267578125,
        0.0655517578125,
        0.255615234375,
        -0.341552734375,
        0.454833984375,
        -0.093017578125,
        0.255859375,
        -0.5615234375,
        -0.61376953125,
        0.1292724609375,
        -0.7216796875,
        -0.32080078125,
        -0.41748046875,
        0.90283203125,
        0.78515625,
        -0.1378173828125,
        0.275390625,
        -0.39306640625,
        0.06817626953125,
        0.689453125,
        0.43359375,
        -0.25537109375,
        -0.06890869140625,
        -0.73193359375,
        -0.1839599609375,
        -0.206787109375,
        0.006847381591796875,
        0.91015625,
        -0.91064453125,
        0.355712890625,
        -0.0875244140625,
        0.5888671875,
        -0.14453125,
        -0.72216796875,
        0.164794921875,
        -0.290283203125,
        0.3828125,
        -0.2269287109375,
        0.15478515625,
        0.60400390625,
        -0.06610107421875,
        -0.859375,
        -0.142333984375,
        -0.24365234375,
        0.44287109375,
        0.40478515625,
        0.361083984375,
        0.193603515625,
        0.294189453125,
        0.5458984375,
        -0.234619140625,
        -0.5673828125,
        -0.6875,
        -0.1075439453125,
        0.59619140625,
        -0.3486328125,
        -0.275390625,
        0.62158203125,
        0.6494140625,
        -0.80908203125,
        0.2301025390625,
        -0.86962890625,
        -0.1124267578125,
        -0.5654296875,
        -0.252685546875,
        -0.020172119140625,
        -0.7099609375,
        -0.29931640625,
        0.4560546875,
        0.335205078125,
        0.22021484375,
        -0.40771484375,
        0.1668701171875,
        0.50341796875,
        0.8603515625,
        0.84375,
        0.87548828125,
        0.5458984375,
        -0.779296875,
        -0.059661865234375,
        -0.70068359375,
        -0.537109375,
        -0.6591796875,
        -0.374267578125,
        -0.8359375
      ],
      "dimension": 768,
      "processingTimeMs": 0,
      "modelVersion": "cocosoda-v1.1",
      "filePath": "tests/test_file_scanner.py",
      "fileName": "test_file_scanner.py",
      "language": "python",
      "startLine": 12,
      "endLine": 124,
      "content": "class TestFileScanner(unittest.TestCase):\r\n    \"\"\"\r\n    Test cases for the FileScanner class.\r\n    \"\"\"\r\n    \r\n    def setUp(self):\r\n        \"\"\"\r\n        Set up test environment.\r\n        \"\"\"\r\n        # Create a temporary directory for testing\r\n        self.temp_dir = tempfile.TemporaryDirectory()\r\n        self.workspace_path = self.temp_dir.name\r\n        \r\n        # Create some test files\r\n        self.test_files = [\r\n            os.path.join(self.workspace_path, \"file1.py\"),\r\n            os.path.join(self.workspace_path, \"file2.py\"),\r\n            os.path.join(self.workspace_path, \"file3.txt\"),\r\n            os.path.join(self.workspace_path, \".gitignore\")\r\n        ]\r\n        \r\n        for file_path in self.test_files:\r\n            with open(file_path, 'w') as f:\r\n                f.write(f\"Content of {os.path.basename(file_path)}\")\r\n                \r\n        # Create a directory to be ignored\r\n        os.makedirs(os.path.join(self.workspace_path, \".git\"))\r\n        with open(os.path.join(self.workspace_path, \".git\", \"config\"), 'w') as f:\r\n            f.write(\"This file should be ignored\")\r\n            \r\n        # Create a test configuration\r\n        self.config = {\r\n            \"ignore_patterns\": [\"**/.git/**\"],\r\n            \"max_file_size\": 1024 * 1024,\r\n            \"supported_extensions\": [\".py\", \".txt\"]\r\n        }\r\n        \r\n        # Initialize the file scanner\r\n        self.file_scanner = FileScanner(self.config)\r\n        \r\n    def tearDown(self):\r\n        \"\"\"\r\n        Clean up after tests.\r\n        \"\"\"\r\n        self.temp_dir.cleanup()\r\n        \r\n    def test_should_ignore_file(self):\r\n        \"\"\"\r\n        Test file ignoring logic.\r\n        \"\"\"\r\n        # Should not ignore regular files\r\n        for file_path in self.test_files:\r\n            self.assertFalse(self.file_scanner._should_ignore_file(file_path))\r\n            \r\n        # Should ignore files in .git directory\r\n        git_config = os.path.join(self.workspace_path, \".git\", \"config\")\r\n        self.assertTrue(self.file_scanner._should_ignore_file(git_config))\r\n        \r\n    def test_compute_file_hash(self):\r\n        \"\"\"\r\n        Test file hash computation.\r\n        \"\"\"\r\n        # Each file should have a unique hash\r\n        hashes = set()\r\n        for file_path in self.test_files:\r\n            file_hash = self.file_scanner._compute_file_hash(file_path)\r\n            self.assertIsInstance(file_hash, str)\r\n            self.assertEqual(len(file_hash), 64)  # SHA-256 hash is 64 characters\r\n            hashes.add(file_hash)\r\n            \r\n        # All hashes should be unique\r\n        self.assertEqual(len(hashes), len(self.test_files))\r\n        \r\n    def test_build_merkle_tree(self):\r\n        \"\"\"\r\n        Test Merkle tree construction.\r\n        \"\"\"\r\n        # Create a simple mapping of file paths to hashes\r\n        file_hashes = {\r\n            \"file1.py\": \"a\" * 64,\r\n            \"file2.py\": \"b\" * 64,\r\n            \"file3.txt\": \"c\" * 64\r\n        }\r\n        \r\n        # Build the Merkle tree\r\n        merkle_root = self.file_scanner._build_merkle_tree(file_hashes)\r\n        \r\n        # Check that we got a valid hash\r\n        self.assertIsInstance(merkle_root, str)\r\n        self.assertEqual(len(merkle_root), 64)\r\n        \r\n    @patch('os.walk')\r\n    @patch('chunker.file_scanner.FileScanner._compute_file_hash')\r\n    def test_scan_workspace(self, mock_compute_hash, mock_walk):\r\n        \"\"\"\r\n        Test workspace scanning.\r\n        \"\"\"\r\n        # Set up mock for os.walk\r\n        mock_walk.return_value = [\r\n            (self.workspace_path, [], [\"file1.py\", \"file2.py\", \"file3.txt\", \".gitignore\"]),\r\n            (os.path.join(self.workspace_path, \".git\"), [], [\"config\"])\r\n        ]\r\n        \r\n        # Set up mock for _compute_file_hash\r\n        mock_compute_hash.return_value = \"a\" * 64\r\n        \r\n        # Scan the workspace\r\n        file_list, merkle_root = self.file_scanner.scan_workspace(self.workspace_path)\r\n        \r\n        # Check the results\r\n        self.assertEqual(len(file_list), 4)  # Should include all non-ignored files\r\n        self.assertIsInstance(merkle_root, str)\r\n        self.assertEqual(len(merkle_root), 64)",
      "parser": "python_parser",
      "type": "class",
      "metadata": {
        "userId": "test-monitor-user-comprehensive",
        "deviceId": "test-monitor-device-comprehensive",
        "workspacePath": "E:\\北京芸思\\code_chunker\\code-chunker\\python",
        "language": "python",
        "startLine": 12,
        "endLine": 124,
        "content": "class TestFileScanner(unittest.TestCase):\r\n    \"\"\"\r\n    Test cases for the FileScanner class.\r\n    \"\"\"\r\n    \r\n    def setUp(self):\r\n        \"\"\"\r\n        Set up test environment.\r\n        \"\"\"\r\n        # Create a temporary directory for testing\r\n        self.temp_dir = tempfile.TemporaryDirectory()\r\n        self.workspace_path = self.temp_dir.name\r\n        \r\n        # Create some test files\r\n        self.test_files = [\r\n            os.path.join(self.workspace_path, \"file1.py\"),\r\n            os.path.join(self.workspace_path, \"file2.py\"),\r\n            os.path.join(self.workspace_path, \"file3.txt\"),\r\n            os.path.join(self.workspace_path, \".gitignore\")\r\n        ]\r\n        \r\n        for file_path in self.test_files:\r\n            with open(file_path, 'w') as f:\r\n                f.write(f\"Content of {os.path.basename(file_path)}\")\r\n                \r\n        # Create a directory to be ignored\r\n        os.makedirs(os.path.join(self.workspace_path, \".git\"))\r\n        with open(os.path.join(self.workspace_path, \".git\", \"config\"), 'w') as f:\r\n            f.write(\"This file should be ignored\")\r\n            \r\n        # Create a test configuration\r\n        self.config = {\r\n            \"ignore_patterns\": [\"**/.git/**\"],\r\n            \"max_file_size\": 1024 * 1024,\r\n            \"supported_extensions\": [\".py\", \".txt\"]\r\n        }\r\n        \r\n        # Initialize the file scanner\r\n        self.file_scanner = FileScanner(self.config)\r\n        \r\n    def tearDown(self):\r\n        \"\"\"\r\n        Clean up after tests.\r\n        \"\"\"\r\n        self.temp_dir.cleanup()\r\n        \r\n    def test_should_ignore_file(self):\r\n        \"\"\"\r\n        Test file ignoring logic.\r\n        \"\"\"\r\n        # Should not ignore regular files\r\n        for file_path in self.test_files:\r\n            self.assertFalse(self.file_scanner._should_ignore_file(file_path))\r\n            \r\n        # Should ignore files in .git directory\r\n        git_config = os.path.join(self.workspace_path, \".git\", \"config\")\r\n        self.assertTrue(self.file_scanner._should_ignore_file(git_config))\r\n        \r\n    def test_compute_file_hash(self):\r\n        \"\"\"\r\n        Test file hash computation.\r\n        \"\"\"\r\n        # Each file should have a unique hash\r\n        hashes = set()\r\n        for file_path in self.test_files:\r\n            file_hash = self.file_scanner._compute_file_hash(file_path)\r\n            self.assertIsInstance(file_hash, str)\r\n            self.assertEqual(len(file_hash), 64)  # SHA-256 hash is 64 characters\r\n            hashes.add(file_hash)\r\n            \r\n        # All hashes should be unique\r\n        self.assertEqual(len(hashes), len(self.test_files))\r\n        \r\n    def test_build_merkle_tree(self):\r\n        \"\"\"\r\n        Test Merkle tree construction.\r\n        \"\"\"\r\n        # Create a simple mapping of file paths to hashes\r\n        file_hashes = {\r\n            \"file1.py\": \"a\" * 64,\r\n            \"file2.py\": \"b\" * 64,\r\n            \"file3.txt\": \"c\" * 64\r\n        }\r\n        \r\n        # Build the Merkle tree\r\n        merkle_root = self.file_scanner._build_merkle_tree(file_hashes)\r\n        \r\n        # Check that we got a valid hash\r\n        self.assertIsInstance(merkle_root, str)\r\n        self.assertEqual(len(merkle_root), 64)\r\n        \r\n    @patch('os.walk')\r\n    @patch('chunker.file_scanner.FileScanner._compute_file_hash')\r\n    def test_scan_workspace(self, mock_compute_hash, mock_walk):\r\n        \"\"\"\r\n        Test workspace scanning.\r\n        \"\"\"\r\n        # Set up mock for os.walk\r\n        mock_walk.return_value = [\r\n            (self.workspace_path, [], [\"file1.py\", \"file2.py\", \"file3.txt\", \".gitignore\"]),\r\n            (os.path.join(self.workspace_path, \".git\"), [], [\"config\"])\r\n        ]\r\n        \r\n        # Set up mock for _compute_file_hash\r\n        mock_compute_hash.return_value = \"a\" * 64\r\n        \r\n        # Scan the workspace\r\n        file_list, merkle_root = self.file_scanner.scan_workspace(self.workspace_path)\r\n        \r\n        # Check the results\r\n        self.assertEqual(len(file_list), 4)  # Should include all non-ignored files\r\n        self.assertIsInstance(merkle_root, str)\r\n        self.assertEqual(len(merkle_root), 64)",
        "parser": "python_parser",
        "type": "class",
        "vectorDimension": 768,
        "processingTimeMs": 0,
        "modelVersion": "cocosoda-v1.1",
        "createdAt": "2025-06-12T01:18:50.757Z"
      }
    },
    {
      "chunkId": "test_file_scanner_6891f537_127-128_mbsowum3_3",
      "status": "success",
      "vector": [
        -0.7529296875,
        0.2227783203125,
        -0.10772705078125,
        -0.4443359375,
        0.34375,
        0.447998046875,
        -0.310791015625,
        0.6767578125,
        -0.5908203125,
        0.1552734375,
        0.28271484375,
        0.474365234375,
        -0.320556640625,
        0.00908660888671875,
        0.76953125,
        -0.06829833984375,
        -0.233154296875,
        -0.44091796875,
        0.361328125,
        0.05718994140625,
        0.2529296875,
        0.505859375,
        -0.67724609375,
        0.0185394287109375,
        0.08319091796875,
        0.52978515625,
        -0.53271484375,
        -0.564453125,
        -0.1053466796875,
        -0.3828125,
        0.09423828125,
        0.607421875,
        -0.4091796875,
        0.377197265625,
        0.7060546875,
        0.75146484375,
        -0.80419921875,
        0.60888671875,
        0.74853515625,
        -0.580078125,
        -0.08526611328125,
        -0.69482421875,
        0.25732421875,
        -0.280029296875,
        -0.46044921875,
        0.8046875,
        0.4677734375,
        0.7529296875,
        0.252685546875,
        -0.10833740234375,
        -0.2015380859375,
        -0.0634765625,
        0.630859375,
        -0.09130859375,
        0.24560546875,
        -0.233154296875,
        0.06939697265625,
        0.59814453125,
        0.5771484375,
        -0.333251953125,
        0.51953125,
        -0.5537109375,
        -0.61328125,
        0.08221435546875,
        0.0777587890625,
        0.294677734375,
        -0.5009765625,
        0.0555419921875,
        -0.028717041015625,
        0.7470703125,
        -0.29345703125,
        -0.064453125,
        0.5703125,
        -0.248779296875,
        0.2073974609375,
        -0.5205078125,
        0.282470703125,
        -0.6396484375,
        -0.281494140625,
        0.51806640625,
        0.037933349609375,
        -0.6005859375,
        0.09197998046875,
        0.05029296875,
        0.7333984375,
        0.1788330078125,
        -0.64794921875,
        -0.440673828125,
        0.2978515625,
        -0.38623046875,
        -0.476318359375,
        0.48193359375,
        0.2430419921875,
        0.0000737905502319336,
        0.168212890625,
        -0.0108795166015625,
        0.27294921875,
        0.207763671875,
        -0.14013671875,
        -0.5673828125,
        -0.54833984375,
        -0.4609375,
        0.2037353515625,
        -0.03729248046875,
        -0.6708984375,
        0.04034423828125,
        0.7734375,
        0.447509765625,
        0.5048828125,
        -0.2998046875,
        -0.0079498291015625,
        0.09124755859375,
        -0.046661376953125,
        0.17626953125,
        -0.344482421875,
        -0.04302978515625,
        0.04681396484375,
        0.56640625,
        0.1474609375,
        -0.489990234375,
        0.264404296875,
        -0.052703857421875,
        -0.307373046875,
        -0.0682373046875,
        0.021026611328125,
        0.373046875,
        -0.323974609375,
        0.07635498046875,
        -0.350341796875,
        0.363037109375,
        -0.0305938720703125,
        0.280029296875,
        -0.39404296875,
        0.564453125,
        -0.05828857421875,
        -0.1307373046875,
        -0.443359375,
        0.05499267578125,
        0.53662109375,
        0.0217742919921875,
        -0.701171875,
        0.24365234375,
        -0.2332763671875,
        -0.460693359375,
        0.93798828125,
        -0.51220703125,
        -0.43212890625,
        -0.763671875,
        -0.58740234375,
        -0.59326171875,
        0.626953125,
        -0.3095703125,
        -0.161376953125,
        -0.148193359375,
        -0.06817626953125,
        -0.31494140625,
        0.85693359375,
        0.77734375,
        -0.6181640625,
        0.06414794921875,
        -0.25927734375,
        -0.3837890625,
        0.424560546875,
        -0.055999755859375,
        -0.669921875,
        0.73095703125,
        -0.31201171875,
        -0.18603515625,
        -0.61376953125,
        0.748046875,
        -0.183349609375,
        0.2109375,
        -0.42333984375,
        -0.168701171875,
        -0.77490234375,
        -0.33203125,
        -0.448974609375,
        0.671875,
        -0.64453125,
        0.496337890625,
        0.365478515625,
        -0.1336669921875,
        -0.3837890625,
        0.08837890625,
        -0.6630859375,
        -0.292724609375,
        0.1729736328125,
        0.467529296875,
        0.344482421875,
        0.37890625,
        -0.09686279296875,
        0.304443359375,
        -0.06927490234375,
        -0.48046875,
        0.625,
        0.56787109375,
        -0.7578125,
        -0.2469482421875,
        0.0305023193359375,
        -0.372802734375,
        -0.3564453125,
        0.7294921875,
        -0.411865234375,
        0.23046875,
        0.6953125,
        -0.1954345703125,
        -0.2152099609375,
        -0.003917694091796875,
        -0.30615234375,
        0.53955078125,
        0.348876953125,
        0.2366943359375,
        -0.08349609375,
        -0.121826171875,
        0.431884765625,
        0.5634765625,
        0.1904296875,
        -0.86083984375,
        0.06353759765625,
        -0.1285400390625,
        -0.465576171875,
        -0.5244140625,
        0.40771484375,
        0.822265625,
        0.1724853515625,
        -0.2447509765625,
        -0.68701171875,
        0.4951171875,
        -0.351318359375,
        0.65283203125,
        -0.330078125,
        0.34326171875,
        -0.010040283203125,
        -0.18896484375,
        0.222900390625,
        0.8564453125,
        0.69482421875,
        0.341796875,
        0.54931640625,
        -0.6826171875,
        0.447021484375,
        -0.25146484375,
        0.150146484375,
        -0.67236328125,
        -0.79150390625,
        0.58154296875,
        0.43408203125,
        0.03350830078125,
        0.078125,
        -0.0623779296875,
        0.27783203125,
        -0.322509765625,
        -0.24462890625,
        0.376708984375,
        0.32080078125,
        0.646484375,
        -0.73388671875,
        0.0986328125,
        0.7646484375,
        -0.64794921875,
        0.290771484375,
        -0.023834228515625,
        -0.73291015625,
        -0.6572265625,
        0.8134765625,
        -0.350341796875,
        -0.50146484375,
        0.6044921875,
        0.8505859375,
        0.5751953125,
        0.685546875,
        0.37841796875,
        0.14404296875,
        0.12939453125,
        0.235107421875,
        0.1295166015625,
        0.46484375,
        -0.60888671875,
        -0.1097412109375,
        -0.401611328125,
        0.09112548828125,
        -0.779296875,
        0.85400390625,
        0.236572265625,
        0.282958984375,
        -0.58251953125,
        -0.62451171875,
        -0.14453125,
        -0.20751953125,
        -0.65771484375,
        -0.30322265625,
        -0.2587890625,
        0.7880859375,
        0.0885009765625,
        0.64599609375,
        0.76416015625,
        0.285400390625,
        -0.002704620361328125,
        -0.728515625,
        0.6669921875,
        0.05059814453125,
        -0.363037109375,
        0.80126953125,
        0.48779296875,
        0.5361328125,
        0.1309814453125,
        0.38671875,
        -0.063720703125,
        0.68994140625,
        0.01348876953125,
        0.398681640625,
        -0.57861328125,
        -0.5146484375,
        -0.826171875,
        0.331787109375,
        -0.4375,
        -0.69482421875,
        0.2252197265625,
        -0.81201171875,
        -0.546875,
        -0.057159423828125,
        0.751953125,
        -0.34130859375,
        0.34326171875,
        -0.315673828125,
        -0.6455078125,
        -0.0775146484375,
        -0.491455078125,
        0.26171875,
        -0.80517578125,
        0.29736328125,
        -0.81640625,
        0.1990966796875,
        0.1470947265625,
        0.75439453125,
        -0.403076171875,
        0.490478515625,
        0.0732421875,
        0.14990234375,
        0.385009765625,
        0.274658203125,
        0.86962890625,
        0.006038665771484375,
        0.8779296875,
        0.16357421875,
        -0.12493896484375,
        0.041717529296875,
        0.377685546875,
        -0.319580078125,
        0.457763671875,
        0.76171875,
        0.268798828125,
        -0.321044921875,
        0.5400390625,
        -0.89111328125,
        -0.64111328125,
        -0.669921875,
        -0.17724609375,
        0.03887939453125,
        -0.0372314453125,
        -0.38232421875,
        0.1357421875,
        -0.31982421875,
        -0.6591796875,
        0.0926513671875,
        0.1414794921875,
        -0.327880859375,
        0.0243682861328125,
        -0.58251953125,
        0.485595703125,
        0.7197265625,
        -0.78076171875,
        0.5654296875,
        -0.84130859375,
        -0.5537109375,
        -0.437744140625,
        0.027740478515625,
        -0.32275390625,
        0.47802734375,
        0.66455078125,
        -0.71728515625,
        0.419189453125,
        -0.037078857421875,
        -0.162353515625,
        -0.7392578125,
        0.439453125,
        0.07562255859375,
        -0.53173828125,
        0.330078125,
        -0.0826416015625,
        -0.79443359375,
        0.178466796875,
        0.64208984375,
        0.31103515625,
        -0.49755859375,
        -0.472900390625,
        0.239990234375,
        0.8046875,
        0.220703125,
        0.375,
        0.1864013671875,
        0.93212890625,
        0.1966552734375,
        0.5458984375,
        -0.06182861328125,
        0.88232421875,
        -0.52783203125,
        -0.47705078125,
        -0.22216796875,
        -0.220947265625,
        0.127197265625,
        0.036407470703125,
        -0.2371826171875,
        -0.221435546875,
        0.5400390625,
        0.4814453125,
        -0.16943359375,
        -0.2259521484375,
        -0.64599609375,
        -0.031707763671875,
        0.52294921875,
        0.0311737060546875,
        -0.278076171875,
        0.56787109375,
        -0.517578125,
        0.75732421875,
        0.3681640625,
        0.66650390625,
        -0.73974609375,
        -0.5263671875,
        -0.56591796875,
        0.49365234375,
        0.736328125,
        -0.131103515625,
        0.12109375,
        0.0621337890625,
        0.3779296875,
        0.434326171875,
        -0.050018310546875,
        -0.04266357421875,
        -0.006183624267578125,
        0.090576171875,
        -0.07684326171875,
        0.35205078125,
        -0.2479248046875,
        0.480712890625,
        -0.23779296875,
        0.11480712890625,
        0.611328125,
        0.3330078125,
        -0.560546875,
        -0.64697265625,
        -0.2132568359375,
        -0.00612640380859375,
        0.183349609375,
        0.14892578125,
        0.446044921875,
        0.51611328125,
        0.21240234375,
        -0.658203125,
        -0.1749267578125,
        -0.233642578125,
        -0.424072265625,
        0.121826171875,
        0.345947265625,
        -0.0184478759765625,
        -0.5390625,
        0.1875,
        0.483642578125,
        -0.10601806640625,
        -0.84033203125,
        -0.1649169921875,
        0.2548828125,
        -0.14013671875,
        0.377685546875,
        -0.144775390625,
        0.1595458984375,
        0.71484375,
        0.492919921875,
        0.274169921875,
        -0.6845703125,
        -0.060272216796875,
        -0.1824951171875,
        0.004638671875,
        0.439453125,
        -0.063232421875,
        0.1473388671875,
        -0.6123046875,
        -0.8525390625,
        -0.35693359375,
        -0.583984375,
        -0.06781005859375,
        0.5029296875,
        -0.60888671875,
        -0.253662109375,
        0.0278472900390625,
        -0.3681640625,
        -0.60400390625,
        0.48828125,
        0.09881591796875,
        0.59912109375,
        0.66943359375,
        0.4599609375,
        -0.25927734375,
        0.0693359375,
        -0.1356201171875,
        0.413818359375,
        -0.1390380859375,
        0.525390625,
        -0.398193359375,
        0.1390380859375,
        -0.09539794921875,
        0.50244140625,
        0.65283203125,
        -0.75048828125,
        -0.006183624267578125,
        -0.26904296875,
        0.109130859375,
        -0.935546875,
        -0.43310546875,
        -0.416015625,
        0.207275390625,
        -0.237548828125,
        0.2205810546875,
        0.0016241073608398438,
        -0.8916015625,
        -0.353271484375,
        0.60107421875,
        0.447509765625,
        0.489013671875,
        -0.453125,
        0.7900390625,
        0.300048828125,
        -0.50634765625,
        -0.521484375,
        -0.427978515625,
        -0.5302734375,
        0.84814453125,
        0.20068359375,
        0.8447265625,
        0.49755859375,
        -0.060272216796875,
        0.497802734375,
        0.282958984375,
        -0.29638671875,
        0.150634765625,
        -0.152587890625,
        -0.1705322265625,
        0.37841796875,
        -0.0200958251953125,
        -0.413818359375,
        0.39892578125,
        -0.1875,
        -0.5849609375,
        0.475341796875,
        -0.6318359375,
        -0.55322265625,
        -0.034637451171875,
        -0.239013671875,
        0.2318115234375,
        0.07281494140625,
        -0.3447265625,
        -0.1058349609375,
        -0.1365966796875,
        -0.08746337890625,
        -0.810546875,
        -0.42822265625,
        -0.0182647705078125,
        0.2724609375,
        0.470947265625,
        -0.42724609375,
        -0.26953125,
        0.767578125,
        0.29638671875,
        0.1259765625,
        -0.386474609375,
        -0.161376953125,
        -0.2337646484375,
        -0.6865234375,
        0.15869140625,
        -0.416748046875,
        -0.4189453125,
        -0.359619140625,
        -0.0660400390625,
        -0.0189208984375,
        0.58544921875,
        0.51611328125,
        -0.744140625,
        0.5986328125,
        0.0079498291015625,
        -0.336181640625,
        0.286865234375,
        0.27783203125,
        0.0650634765625,
        -0.261474609375,
        0.23828125,
        -0.60498046875,
        0.40283203125,
        0.281494140625,
        -0.1719970703125,
        0.60546875,
        0.529296875,
        0.033172607421875,
        0.560546875,
        -0.7255859375,
        0.1650390625,
        0.7158203125,
        0.393798828125,
        0.63525390625,
        -0.12298583984375,
        -0.0258331298828125,
        0.144775390625,
        0.625,
        0.2474365234375,
        -0.6240234375,
        -0.1260986328125,
        0.625,
        0.58544921875,
        0.76904296875,
        -0.5302734375,
        0.21826171875,
        -0.60009765625,
        -0.52587890625,
        -0.74365234375,
        0.183837890625,
        0.2080078125,
        -0.03631591796875,
        -0.07037353515625,
        0.33251953125,
        -0.0528564453125,
        0.4833984375,
        -0.4912109375,
        0.787109375,
        -0.04180908203125,
        -0.12127685546875,
        0.453857421875,
        -0.2548828125,
        -0.55810546875,
        0.457275390625,
        -0.54345703125,
        0.1260986328125,
        -0.376220703125,
        -0.59619140625,
        -0.3984375,
        -0.65771484375,
        -0.325439453125,
        0.59619140625,
        0.299072265625,
        -0.615234375,
        -0.119873046875,
        0.1976318359375,
        0.477294921875,
        -0.60986328125,
        -0.0657958984375,
        0.135498046875,
        0.433349609375,
        0.311279296875,
        0.437744140625,
        -0.6484375,
        -0.58056640625,
        -0.042449951171875,
        -0.22607421875,
        -0.441650390625,
        0.180908203125,
        -0.365966796875,
        0.295166015625,
        -0.285400390625,
        0.477783203125,
        0.2578125,
        -0.75927734375,
        -0.75439453125,
        0.41064453125,
        0.493408203125,
        -0.387451171875,
        0.292724609375,
        -0.472412109375,
        0.5419921875,
        -0.0662841796875,
        0.260986328125,
        -0.321044921875,
        0.08148193359375,
        -0.28857421875,
        0.08526611328125,
        -0.2022705078125,
        0.100830078125,
        0.27099609375,
        -0.1402587890625,
        0.2091064453125,
        -0.3740234375,
        -0.2237548828125,
        0.261962890625,
        0.00612640380859375,
        0.253173828125,
        -0.7490234375,
        -0.121337890625,
        -0.3388671875,
        0.8359375,
        0.00769805908203125,
        0.255859375,
        0.1690673828125,
        -0.306640625,
        -0.2197265625,
        0.59228515625,
        0.52197265625,
        0.1328125,
        0.284912109375,
        -0.71044921875,
        0.266845703125,
        0.63134765625,
        0.81640625,
        0.7177734375,
        -0.439697265625,
        0.3486328125,
        0.451416015625,
        0.69384765625,
        -0.035858154296875,
        -0.267578125,
        0.132080078125,
        0.19677734375,
        0.3486328125,
        0.19384765625,
        0.28759765625,
        0.63671875,
        0.213623046875,
        -0.8525390625,
        0.51806640625,
        -0.56787109375,
        0.0038967132568359375,
        -0.1322021484375,
        -0.84130859375,
        -0.2220458984375,
        0.271240234375,
        0.51171875,
        0.0833740234375,
        -0.499267578125,
        -0.2276611328125,
        -0.546875,
        0.00487518310546875,
        0.05950927734375,
        -0.07366943359375,
        0.1339111328125,
        0.07080078125,
        -0.271240234375,
        0.74267578125,
        -0.6943359375,
        -0.708984375,
        -0.197509765625,
        -0.2303466796875,
        0.2249755859375,
        -0.2369384765625,
        0.466796875,
        -0.1591796875,
        0.1868896484375,
        0.3037109375,
        0.10260009765625,
        0.77294921875,
        0.211669921875,
        0.87109375,
        0.1290283203125,
        0.291015625,
        0.853515625,
        -0.1456298828125,
        0.4921875,
        0.1591796875,
        -0.43212890625,
        -0.724609375,
        0.11090087890625,
        -0.1949462890625
      ],
      "dimension": 768,
      "processingTimeMs": 0,
      "modelVersion": "cocosoda-v1.1",
      "filePath": "tests/test_file_scanner.py",
      "fileName": "test_file_scanner.py",
      "language": "python",
      "startLine": 127,
      "endLine": 128,
      "content": "if __name__ == \"__main__\":\r\n    unittest.main()",
      "parser": "python_parser",
      "type": "other",
      "metadata": {
        "userId": "test-monitor-user-comprehensive",
        "deviceId": "test-monitor-device-comprehensive",
        "workspacePath": "E:\\北京芸思\\code_chunker\\code-chunker\\python",
        "language": "python",
        "startLine": 127,
        "endLine": 128,
        "content": "if __name__ == \"__main__\":\r\n    unittest.main()",
        "parser": "python_parser",
        "type": "other",
        "vectorDimension": 768,
        "processingTimeMs": 0,
        "modelVersion": "cocosoda-v1.1",
        "createdAt": "2025-06-12T01:18:50.791Z"
      }
    }
  ],
  "originalChunkData": [
    {
      "id": "test_file_scanner_6891f537_12-124_mbsowum3_2",
      "filePath": "tests/test_file_scanner.py",
      "type": "class",
      "contentPreview": "class TestFileScanner(unittest.TestCase):\r\n    \"\"\"\r\n    Test cases for the FileScanner class.\r\n    \"\"\"\r\n    \r\n    def setUp(self):\r\n        \"\"\"\r\n        Set up test environment.\r\n        \"\"\"\r\n        ..."
    },
    {
      "id": "test_file_scanner_6891f537_127-128_mbsowum3_3",
      "filePath": "tests/test_file_scanner.py",
      "type": "other",
      "contentPreview": "if __name__ == \"__main__\":\r\n    unittest.main()..."
    }
  ]
}